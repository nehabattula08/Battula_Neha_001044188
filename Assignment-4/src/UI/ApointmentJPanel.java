/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package UI;

import com.toedter.calendar.JTextFieldDateEditor;
import java.util.ArrayList;

import javax.swing.JOptionPane;
import model.Encounter;
import model.EncounterHistory;
import model.Patient;
import model.PatientDirectory;
import model.Person;
import model.PersonDirectory;
import model.VitalSigns;

/**
 *
 * @author Neha
 */
public class ApointmentJPanel extends javax.swing.JPanel {

    /**
     * Creates new form ApointmentJPanel
     */
    
    //private Person person1;
    private Patient patient;
    private PatientDirectory patientdirectory;
    
    public ApointmentJPanel(Patient patient,PatientDirectory patientdirectory) {
        initComponents();
        JTextFieldDateEditor editor = (JTextFieldDateEditor) visitDate.getDateEditor();
        editor.setEditable(false);
        this.patient=patient;
     
        this.patientdirectory=patientdirectory;
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        txtMrn = new javax.swing.JTextField();
        lblMRN = new javax.swing.JLabel();
        btnSubmit = new javax.swing.JButton();
        lblBP = new javax.swing.JLabel();
        visitDate = new com.toedter.calendar.JDateChooser();
        jLabel3 = new javax.swing.JLabel();
        lblPulse = new javax.swing.JLabel();
        lblTemp = new javax.swing.JLabel();
        txtBP = new javax.swing.JTextField();
        txtPulse = new javax.swing.JTextField();
        txtTemperature = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();

        jPanel1.setBackground(new java.awt.Color(0, 153, 255));

        txtMrn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtMrnActionPerformed(evt);
            }
        });

        lblMRN.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        lblMRN.setForeground(new java.awt.Color(255, 255, 255));
        lblMRN.setText("Enter MRN:");

        btnSubmit.setText("Submit");
        btnSubmit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSubmitActionPerformed(evt);
            }
        });

        lblBP.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        lblBP.setForeground(new java.awt.Color(255, 255, 255));
        lblBP.setText("Blood Pressure:");

        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setText("Date of Visit:");

        lblPulse.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        lblPulse.setForeground(new java.awt.Color(255, 255, 255));
        lblPulse.setText("Pulse Rate:");

        lblTemp.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        lblTemp.setForeground(new java.awt.Color(255, 255, 255));
        lblTemp.setText("Temperature:");

        txtPulse.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtPulseActionPerformed(evt);
            }
        });

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Make an Appointment");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(66, 66, 66)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblMRN, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel3)
                            .addComponent(lblBP)
                            .addComponent(lblTemp)
                            .addComponent(lblPulse))
                        .addGap(61, 61, 61)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(txtBP, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 52, Short.MAX_VALUE)
                                .addComponent(txtPulse, javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(txtTemperature, javax.swing.GroupLayout.Alignment.LEADING))
                            .addComponent(visitDate, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtMrn, javax.swing.GroupLayout.PREFERRED_SIZE, 149, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(324, 324, 324)
                        .addComponent(btnSubmit)))
                .addContainerGap(392, Short.MAX_VALUE))
            .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(24, 24, 24)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(38, 38, 38)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtMrn, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblMRN, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(20, 20, 20)
                        .addComponent(visitDate, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(11, 11, 11))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel3)
                        .addGap(18, 18, 18)))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblBP)
                    .addComponent(txtBP, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(25, 25, 25)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblPulse)
                    .addComponent(txtPulse, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblTemp)
                    .addComponent(txtTemperature, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(48, 48, 48)
                .addComponent(btnSubmit)
                .addContainerGap(259, Short.MAX_VALUE))
        );

        jPanel1Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {txtBP, txtMrn, txtPulse, txtTemperature, visitDate});

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 809, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(0, 0, Short.MAX_VALUE)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 0, Short.MAX_VALUE)))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 669, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(0, 0, Short.MAX_VALUE)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(0, 0, Short.MAX_VALUE)))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void txtMrnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtMrnActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtMrnActionPerformed

    private void btnSubmitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSubmitActionPerformed
        // TODO add your handling code here:
        try{
         //Patient patient = new Patient();   
         
         VitalSigns vs= new VitalSigns();
         Encounter encounter = new Encounter();
         EncounterHistory encounterhistory = new EncounterHistory();
         ArrayList <Encounter> encounterList = new ArrayList<>(); 
         Boolean patientFound=false;
          int f =1;  
            for(Patient patient: patientdirectory.getPatientHistory()){
                
               
                if(patient.getmedicalRecordNumber().equals(txtMrn.getText())){
                   patientFound=true;
                   
              if((txtBP.getText()==null)||(txtBP.getText().trim().isEmpty())|| !txtBP.getText().matches("^[0-9]*$")){
                 JOptionPane.showMessageDialog(null,"Please enter a valid blood pressure");   
                 f=0;
           }
              
         if((txtTemperature.getText()==null)||(txtTemperature.getText().trim().isEmpty())|| !txtTemperature.getText().matches("([0-9]*[.]*[0-9])")){
                 JOptionPane.showMessageDialog(null,"Please enter a valid temperature");   
                 f=0;
           }    
         
      if((txtPulse.getText()==null)||(txtPulse.getText().trim().isEmpty())|| !txtPulse.getText().matches("^[0-9]*$")){
                 JOptionPane.showMessageDialog(null,"Please enter a valid pulse rate");   
                 f=0;
           } 
                   
                   vs.setBloodPressure(Double.parseDouble(txtBP.getText()));
                   vs.setTemperature(Double.parseDouble(txtTemperature.getText()));
                   vs.setPulse(Integer.parseInt(txtPulse.getText()));
                   encounter.setDate(visitDate.getDate());
                   encounter.setVitalsigns(vs);
                   encounterList.add(encounter);
                   encounterhistory.setEncounter(encounterList);
                   patient.setEncounterhistory(encounterhistory); 
                   if(f==1){
                   JOptionPane.showMessageDialog(this,"Patient's vital signs recorded successfully"); }  
                }
            }
            
            if(patientFound==false){
                JOptionPane.showMessageDialog(this,"Patient's medical record number not found");   
            }
        }
        catch(Exception e){
          
        }
        
        //set the display table to true
    }//GEN-LAST:event_btnSubmitActionPerformed

    private void txtPulseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtPulseActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtPulseActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnSubmit;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel lblBP;
    private javax.swing.JLabel lblMRN;
    private javax.swing.JLabel lblPulse;
    private javax.swing.JLabel lblTemp;
    private javax.swing.JTextField txtBP;
    private javax.swing.JTextField txtMrn;
    private javax.swing.JTextField txtPulse;
    private javax.swing.JTextField txtTemperature;
    private com.toedter.calendar.JDateChooser visitDate;
    // End of variables declaration//GEN-END:variables
}
